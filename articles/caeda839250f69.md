---
title: "AWSでストレージを選ぶ際に考えること"
emoji: "📑"
type: "tech" # tech: 技術記事
topics: [aws, storage]
published: false
---
## はじめに
夏も終わりが近づいてきたので、最近読んだ「基礎からの新しいストレージ入門」という本の読書感想文を書きます。
こちらの本です。
https://www.amazon.co.jp/%E5%9F%BA%E7%A4%8E%E3%81%8B%E3%82%89%E3%81%AE%E6%96%B0%E3%81%97%E3%81%84%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E5%85%A5%E9%96%80-%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%A1%93%E3%81%8B%E3%82%89%E8%A8%AD%E8%A8%88%E3%83%BB%E9%81%8B%E7%94%A8%E7%AE%A1%E7%90%86%E3%81%AE%E5%AE%9F%E8%B7%B5%E3%81%BE%E3%81%A7-%E5%9D%82%E4%B8%8B-%E5%B9%B8%E5%BE%B3/dp/4802614136

今回は特にAWSのS3, EFS, EBSのストレージを選定する際に考えることを、本で学んだことを元に自分なりにまとめてみました。
正解でもベストプラクティスでもないので、ふーんそうなんだ。くらいの気持ちで見てください。

## 本の概要
まず簡単に本の概要ですが、ストレージの仕組みについて詳しく書かれた書籍です。

「ブロックストレージ」「ファイルストレージ」「オブジェクトストレージ」の仕組みや違いが分かる？
と聞かれた時に、うっ...となる私としては大変勉強になる内容でした。

特にストレージの全体像はふんわり理解しているけど、内部的なコンポーネントについては初めて知ることばかりだったので、同じような方にはぜひ一読してもらいたいです！

## どんなストレージがあるの？
まずは簡単にですが、各ストレージについて紹介します。

上でも書いたように、ストレージにはいくつかの種類があります。
AWSでも各ストレージ用のサービスが存在します。
![](/images/x0.png)

この図では各ストレージに対応するAWSのサービスを表しています。

### 各ストレージの特徴
では、一旦AWSのことは忘れてもらい、一般的な各ストレージの特徴を見ていきましょう。

イメージとしては
ブロックストレージ → 他の二つのストレージのベースとなるストレージで、最終的にデータを保管する場所
ファイルストレージ → ブロックストレージ＋ファイルシステムやファイル共有ができるシステム
オブジェクトストレージ → ブロックストレージ＋HTTP/HTTPSでデータをやりとりできるシステム
という感じです。
![](/images/x1.png)

AWSではそれぞれサービスとして存在しますが、全て最終的なデータの保管はブロックストレージ(EBSではない)へされていると思います。
あとは、アプリケーションを構築する際に、ストレージに何を求めるか？という部分です。

ではここから書籍でも紹介されている「ストレージの選び方」を参考に
AWSでのストレージサービスの選び方を考えていきます。

## アプリケーション
ストレージを選ぶ際に最も重要なのはアプリケーションです。
これはAWSでもオンプレミスでも変わりません。

仮にアプリケーションがHTTP/HTTPSに対応していないアプリケーションであればオブジェクトストレージであるS3を直接使用することができません。

ブロックストレージや


## 障害対策
AWSのストレージとオンプレミスのストレージを比べるとAWSのストレージにはかなりメリットがあると思います。

オンプレミスのストレージでは冗長化のために、別のストレージへデータをレプリケートしたり、
RAID構成を組むなどして障害に対応する必要があります。

それに対してEFS, S3では特に特別な設定をしなくても複数のAZ(アベイラビリティゾーン)で冗長化されています。
さらにどちらも99.999999999 % (イレブンナイン)の耐久性も持っています。

これをオンプレミスのストレージで行おうとするととても大変です。

## バックアップ

## I/O性能

## コスト

## セキュリティ
EFS:EFSへの接続にはマウントターゲットと呼ばれるENIを通して接続します。
そたのめ、ENIにセキュリティグループを設定することで、セキュリティの制御が可能です。

## まとめ
物理マシンや仮想マシンの場合は考えないといけない、スケーリングやバックアップのあれこれをAWSでは考慮する必要がない
ということを改めて実感することができました。

私は本を読むときはまずは自分が欲している部分をしっかり読んで、他はさらっと流し読みします。
(もちろん必要と感じれば後から読み返します)
今回は1,2,5章は必読で他は自分の必要な部分を読むという感じでもいいのかなと感じました。

私は特に6章のクラウドにおけるストレージ選定について読んだことをまとめました。

## 参考資料

